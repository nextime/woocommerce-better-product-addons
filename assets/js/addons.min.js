jQuery(document).ready(function(e){function t(){e("form.cart").on("keyup change",".product-addon input, .product-addon textarea",function(){if(e(this).attr("maxlength")>0){var t=e(this).val(),n=e(this).attr("maxlength")-t.length;e(this).next(".chars_remaining").find("span").text(n)}});e("form.cart").find(".addon-custom, .addon-custom-textarea").each(function(){e(this).attr("maxlength")>0&&e(this).after('<small class="chars_remaining"><span>'+e(this).attr("maxlength")+"</span> "+woocommerce_addons_params.i18n_remaining+"</small>")});e("form.cart").on("change",".product-addon input, .product-addon textarea, .product-addon select, input.qty",function(){var t=e(this).closest("form.cart");t.trigger("woocommerce-product-addons-update")});e("form.variations_form").on("found_variation",function(t,n){var r=e(this),i=r.find("#product-addons-total");if(e(n.price_html).find(".amount:last").size()){product_price=e(n.price_html).find(".amount:last").text();product_price=product_price.replace(woocommerce_addons_params.currency_format_thousand_sep,"");product_price=product_price.replace(woocommerce_addons_params.currency_format_decimal_sep,".");product_price=product_price.replace(/[^0-9\.]/g,"");product_price=parseFloat(product_price);i.data("price",product_price)}r.trigger("woocommerce-product-addons-update")});e("form.cart").bind("woocommerce-product-addons-update",function(){var t=0,n=e(this),r=n.find("#product-addons-total"),i=r.data("price"),s=r.data("type");s=="variable"&&n.find(".single_variation").after(r);n.find(".addon").each(function(){var n=0;if(e(this).is(".addon-custom-price"))n=e(this).val();else if(e(this).is(".addon-input_multiplier")){if(isNaN(e(this).val())||e(this).val()==""){e(this).val("");e(this).closest("p").find(".addon-alert").show()}else{e(this).val()!=""&&e(this).val(Math.ceil(e(this).val()));e(this).closest("p").find(".addon-alert").hide()}n=e(this).data("price")*e(this).val()}else e(this).is(".addon-checkbox, .addon-radio")?e(this).is(":checked")&&(n=e(this).data("price")):e(this).is(".addon-select")?e(this).val()&&(n=e(this).find("option:selected").data("price")):e(this).val()&&(n=e(this).data("price"));n||(n=0);t=parseFloat(t)+parseFloat(n)});var o=parseFloat(n.find("input.qty").val());if(t>0&&o>0){t=parseFloat(t*o);var u=accounting.formatMoney(t,{symbol:woocommerce_addons_params.currency_format_symbol,decimal:woocommerce_addons_params.currency_format_decimal_sep,thousand:woocommerce_addons_params.currency_format_thousand_sep,precision:woocommerce_addons_params.currency_format_num_decimals,format:woocommerce_addons_params.currency_format});if(i){product_total_price=parseFloat(i*o);var a=accounting.formatMoney(product_total_price+t,{symbol:woocommerce_addons_params.currency_format_symbol,decimal:woocommerce_addons_params.currency_format_decimal_sep,thousand:woocommerce_addons_params.currency_format_thousand_sep,precision:woocommerce_addons_params.currency_format_num_decimals,format:woocommerce_addons_params.currency_format})}html='<dl class="product-addon-totals"><dt>'+woocommerce_addons_params.i18n_addon_total+'</dt><dd><strong><span class="amount">'+u+"</span></strong></dd>";a&&(html=html+"<dt>"+woocommerce_addons_params.i18n_grand_total+'</dt><dd><strong><span class="amount">'+a+"</span></strong></dd>");html+="</dl>";r.html(html)}else r.empty();e("body").trigger("updated_addons")});e("form.cart").find(".addon-custom, .addon-custom-textarea, .product-addon input, .product-addon textarea, .product-addon select, input.qty").change()}t();e("form.variations_form .product-addon").closest("form.cart").find(".variations select").change();e("body").on("quick-view-displayed",function(){t()})});